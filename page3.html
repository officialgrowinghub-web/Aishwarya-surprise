<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Little Surprise üéÅ</title>

<style>
    body {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, #ffe8f0, #ffc9e3);
        text-align: center;
        overflow-x: hidden;
    }

    h1 {
        margin-top: 30px;
        font-size: 38px;
        color: #ff4f92;
        text-shadow: 0 0 10px rgba(255, 0, 90, 0.5);
        animation: float 2s infinite alternate ease-in-out;
    }

    @keyframes float {
        0% { transform: translateY(0); }
        100% { transform: translateY(-10px); }
    }

    /* Scratch Card */
    .scratch-box {
        margin: 30px auto;
        width: 85%;
        height: 180px;
        background: #ddd;
        border-radius: 15px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    }

    #secret {
        position: absolute;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #ff7bb0, #ffa1d2);
        color: white;
        font-size: 24px;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px;
        z-index: 0;
    }

    #cover {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 2;
    }

    /* Balloon Game */
    #gameArea {
        margin-top: 30px;
    }

    .balloon {
        width: 70px;
        height: 90px;
        background: #ff8fb1;
        border-radius: 50%;
        position: relative;
        display: inline-block;
        margin: 15px;
        cursor: pointer;
        animation: floatUp 3s infinite ease-in-out;
    }

    @keyframes floatUp {
        0% { transform: translateY(10px); }
        100% { transform: translateY(-20px); }
    }

    /* Lotus floating */
    .lotus {
        position: fixed;
        bottom: -40px;
        font-size: 30px;
        animation: drift 8s linear infinite;
        opacity: 0.8;
    }

    @keyframes drift {
        0% { transform: translateX(0) rotate(0); }
        100% { transform: translateX(-100vw) rotate(360deg); }
    }

    /* Continue Button */
    .continue-btn {
        display: inline-block;
        margin-top: 40px;
        padding: 18px 40px;
        background: linear-gradient(45deg, #ff4f92, #ff86b8);
        color: white;
        font-size: 22px;
        border-radius: 50px;
        text-decoration: none;
        box-shadow: 0 0 20px rgba(255,70,140,0.6);
        animation: glow 1.5s infinite alternate;
        display: none;
    }

    @keyframes glow {
        0% { box-shadow: 0 0 10px #ff4f92; }
        100% { box-shadow: 0 0 25px #ff1f6d; transform: scale(1.05); }
    }
</style>
</head>

<body>

<h1>Another Surprise for You üéÅ</h1>

<h2 style="color:#ff4f92; margin-top:10px;">
‚ú® Scratch the silver area below to reveal your surprise ‚ú®
</h2>

<!-- SCRATCH CARD -->
<div class="scratch-box">
    <div id="secret">You make the world a little brighter ‚ú®</div>
    <canvas id="cover"></canvas>
</div>

<h2 style="color:#ff4f92;">Pop 3 Balloons üéà to get the next surprise!</h2>

<div id="gameArea">
    <div class="balloon" onclick="popBalloon(this)"></div>
    <div class="balloon" onclick="popBalloon(this)"></div>
    <div class="balloon" onclick="popBalloon(this)"></div>
</div>

<a id="nextBtn" href="page4.html" class="continue-btn">Continue ‚ûú</a>

<script>
/* FIXED SCRATCH FUNCTION */
const canvas = document.getElementById("cover");
const ctx = canvas.getContext("2d");

function setupCanvas() {
    canvas.width = canvas.parentElement.clientWidth;
    canvas.height = canvas.parentElement.clientHeight;

    ctx.fillStyle = "silver";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
}

setupCanvas();
window.addEventListener("resize", setupCanvas);

/* Works for mouse + mobile */
function scratch(e) {
    const rect = canvas.getBoundingClientRect();
    let x, y;

    if (e.touches) {
        x = e.touches[0].clientX - rect.left;
        y = e.touches[0].clientY - rect.top;
    } else {
        x = e.offsetX;
        y = e.offsetY;
    }

    ctx.globalCompositeOperation = "destination-out";
    ctx.beginPath();
    ctx.arc(x, y, 25, 0, Math.PI * 2);
    ctx.fill();
}

canvas.addEventListener("mousemove", (e) => scratch(e));
canvas.addEventListener("mousedown", (e) => scratch(e));
canvas.addEventListener("touchstart", (e) => scratch(e));
canvas.addEventListener("touchmove", (e) => scratch(e));


/* BALLOON GAME */
let popped = 0;

function popBalloon(balloon) {
    balloon.style.visibility = "hidden";
    popped++;

    if (popped === 3) {
        document.getElementById("nextBtn").style.display = "inline-block";
    }
}

/* LOTUS FLOAT */
setInterval(() => {
    let lotus = document.createElement("div");
    lotus.innerHTML = "üå∏";
    lotus.className = "lotus";
    lotus.style.left = Math.random() * window.innerWidth + "px";
    lotus.style.fontSize = (25 + Math.random()*20) + "px";
    lotus.style.animationDuration = (6 + Math.random()*4) + "s";
    document.body.appendChild(lotus);

    setTimeout(() => lotus.remove(), 9000);
}, 600);
</script>

</body>
    </html>
